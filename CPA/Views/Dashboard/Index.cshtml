@model CPA.Models.DashboardViewModel

@{
    ViewData["Title"] = "Dashboard";
}

<div class="container mt-1">
    @*     <p class="custom-welcome-text text-left">Bienvenido @ViewBag.FirstName</p>
    *@    <div class="text-center">
        <img src="~/images/logo3.png" alt="Logo" class="img-fluid custom-logo" />
    </div>

    <!-- External search input -->
    <div class="form-group">
        <label for="externalSearch">Search by Name or ID:</label>
        <input type="text" id="externalSearch" class="form-control" placeholder="Press Enter to Search">
    </div>

    <!-- New Customer Button -->
    <div class="d-flex justify-content-center mt-3">
        <button type="button" class="btn btn-primary newClient" data-bs-toggle="modal" data-bs-target="#newCustomerModal">
            <span>Create New Customer</span>
        </button>
        <button type="button" class="btn import-button" id="importFromExcelButton" data-bs-toggle="modal" data-bs-target="#importModal">
            Import from Excel
        </button>

    </div>



    <ul class="nav nav-tabs" id="dashboardTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <a class="nav-link active" id="demograficos-tab" data-toggle="tab" href="#demograficos" role="tab" aria-controls="demograficos" aria-selected="true">Demographic</a>
        </li>
        <li class="nav-item" role="presentation">
            <a class="nav-link" id="contributivos-tab" data-toggle="tab" href="#contributivos" role="tab" aria-controls="contributivos" aria-selected="false">Tax Matters</a>
        </li>
        <li class="nav-item" role="presentation">
            <a class="nav-link" id="administrativos-tab" data-toggle="tab" href="#administrativos" role="tab" aria-controls="administrativos" aria-selected="false">Administrative</a>
        </li>
        <li class="nav-item" role="presentation">
            <a class="nav-link" id="identificacion-tab" data-toggle="tab" href="#identificacion" role="tab" aria-controls="identificacion" aria-selected="false">Identification</a>
        </li>
        <li class="nav-item" role="presentation">
            <a class="nav-link" id="metodo-de-pago-tab" data-toggle="tab" href="#metodo-de-pago" role="tab" aria-controls="metodo-de-pago" aria-selected="false">Payment Methods</a>
        </li>
        <li class="nav-item" role="presentation">
            <a class="nav-link" id="confidencial-tab" data-toggle="tab" href="#confidencial" role="tab" aria-controls="confidencial" aria-selected="false">Confidential</a>
        </li>
    </ul>

    <!-- Modal for Creating a New Customer -->
    <div class="modal fade" id="newCustomerModal" tabindex="-1" aria-labelledby="newCustomerModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newCustomerModalLabel">Create New Customer</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-tabs" id="modalTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" id="modal-demografico-tab" data-bs-toggle="tab" href="#modal-demografico" role="tab" aria-controls="modal-demografico" aria-selected="true">Demographic</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="modal-contributivo-tab" data-bs-toggle="tab" href="#modal-contributivo" role="tab" aria-controls="modal-contributivo" aria-selected="false">Tax Matters</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="modal-administrativo-tab" data-bs-toggle="tab" href="#modal-administrativo" role="tab" aria-controls="modal-administrativo" aria-selected="false">Administrative</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="modal-identificacion-tab" data-bs-toggle="tab" href="#modal-identificacion" role="tab" aria-controls="modal-identificacion" aria-selected="false">Identification</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="modal-pago-tab" data-bs-toggle="tab" href="#modal-pago" role="tab" aria-controls="modal-pago" aria-selected="false">Payment Method</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link" id="modal-confidencial-tab" data-bs-toggle="tab" href="#modal-confidencial" role="tab" aria-controls="modal-confidencial" aria-selected="false">Confidential</a>
                        </li>
                    </ul>
                    <div class="tab-content" id="modalTabsContent">
                        <div class="tab-pane fade show active" id="modal-demografico" role="tabpanel" aria-labelledby="modal-demografico-tab">
                            <form id="createDemograficoForm" method="post" action="@Url.Action("Create", "Dashboard")">
                                <!-- Demografico Fields -->
                                <div class="mb-3">
                                    <label for="newID" class="form-label">ID</label>
                                    <input type="text" class="form-control" id="newID" name="NewDemografico.ID" required>
                                </div>
                                <div class="mb-3">
                                    <label for="newNombre" class="form-label">Name</label>
                                    <input type="text" class="form-control" id="newNombre" name="NewDemografico.Nombre" required>
                                </div>
                                <div class="mb-3">
                                    <label for="newNombreComercial" class="form-label">Commercial Name</label>
                                    <input type="text" class="form-control" id="newNombreComercial" name="NewDemografico.NombreComercial" required>
                                </div>
                                <div class="mb-3">
                                    <label for="newTelefono" class="form-label">Phone Number</label>
                                    <input type="text" class="form-control" id="newTelefono" name="NewDemografico.Telefono" required>
                                </div>
                                <div class="mb-3">
                                    <label for="newCelular" class="form-label">Mobile Number</label>
                                    <input type="text" class="form-control" id="newCelular" name="NewDemografico.Celular">
                                </div>
                                <div class="mb-3">
                                    <label for="newDir" class="form-label">Address</label>
                                    <input type="text" class="form-control" id="newDir" name="NewDemografico.Dir">
                                </div>
                                <div class="mb-3">
                                    <label for="newTipo" class="form-label">Business Type</label>
                                    <select class="form-control" id="newTipo" name="NewDemografico.Tipo" required>
                                        <option value="">--Select--</option>
                                        <option value="Soleproprietor">Soleproprietor</option>
                                        <option value="Corporation">Corporation</option>
                                        <option value="LLC">LLC</option>
                                        <option value="Partnership">Partnership</option>
                                        <option value="Non for Profit">Non for Profit</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>

                                <div class="mb-3">
                                    <label for="newPatronal" class="form-label">Federal Employer Identification Number</label>
                                    <input type="text" class="form-control" id="newPatronal" name="NewDemografico.Patronal">
                                </div>
                                <div class="mb-3">
                                    <label for="newSSN" class="form-label">Social Security Number</label>
                                    <input type="text" class="form-control" id="newSSN" name="NewDemografico.SSN">
                                </div>
                                <div class="mb-3">
                                    <label for="newIncorporacion" class="form-label">Date of Incorporation</label>
                                    <input type="datetime-local" class="form-control" id="newIncorporacion" name="NewDemografico.Incorporacion">
                                </div>
                                <div class="mb-3">
                                    <label for="newOperaciones" class="form-label">Operations Start Date</label>
                                    <input type="datetime-local" class="form-control" id="newOperaciones" name="NewDemografico.Operaciones">
                                </div>
                                <div class="mb-3">
                                    <label for="newIndustria" class="form-label">Industry</label>
                                    <input type="text" class="form-control" id="newIndustria" name="NewDemografico.Industria">
                                </div>
                                <div class="mb-3">
                                    <label for="newNAICS" class="form-label">NAICS Code</label>
                                    <input type="text" class="form-control" id="newNAICS" name="NewDemografico.NAICS">
                                </div>
                                <div class="mb-3">
                                    <label for="newDescripcion" class="form-label">Description</label>
                                    <input type="text" class="form-control" id="newDescripcion" name="NewDemografico.Descripcion">
                                </div>
                                <div class="mb-3">
                                    <label for="newContacto" class="form-label">Contact</label>
                                    <input type="text" class="form-control" id="newContacto" name="NewDemografico.Contacto">
                                </div>
                                <div class="mb-3">
                                    <label for="newDirFisica" class="form-label">Physical Address</label>
                                    <input type="text" class="form-control" id="newDirFisica" name="NewDemografico.DirFisica">
                                </div>
                                <div class="mb-3">
                                    <label for="newDirPostal" class="form-label">Postal Address</label>
                                    <input type="text" class="form-control" id="newDirPostal" name="NewDemografico.DirPostal">
                                </div>
                                <div class="mb-3">
                                    <label for="newEmail" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="newEmail" name="NewDemografico.Email">
                                </div>
                                <div class="mb-3">
                                    <label for="newEmail2" class="form-label">Secondary Email</label>
                                    <input type="email" class="form-control" id="newEmail2" name="NewDemografico.Email2">
                                </div>
                            </form>
                        </div>
                        <div class="tab-pane fade" id="modal-contributivo" role="tabpanel" aria-labelledby="modal-contributivo-tab">
                            <form id="createContributivoForm" method="post" action="@Url.Action("Create", "Dashboard")">
                                <!-- Contributivo Fields -->
                                <input type="hidden" id="newIDContributivo" name="NewContributivo.ID">
                                <div class="mb-3">
                                    <label for="newRegistroEstatal" class="form-label">State Identification Number</label>
                                    <input type="text" class="form-control" id="newRegistroEstatal" name="NewContributivo.Estatal" required>
                                </div>
                                <div class="mb-3">
                                    <label for="newNumeroPoliza" class="form-label">CFSE Policy Number</label>
                                    <input type="text" class="form-control" id="newNumeroPoliza" name="NewContributivo.Poliza" required>
                                </div>
                                <div class="mb-3">
                                    <label for="newRegistroComerciante" class="form-label">Merchant Registry Number</label>
                                    <input type="text" class="form-control" id="newRegistroComerciante" name="NewContributivo.RegComerciante">
                                </div>
                                <div class="mb-3">
                                    <label for="newFechaVencimiento" class="form-label">Expiration Date</label>
                                    <input type="date" class="form-control" id="newFechaVencimiento" name="NewContributivo.Vencimiento">
                                </div>
                                <div class="mb-3">
                                    <label for="newRegistroChoferil" class="form-label">Chauffeur's Insurance Account Number</label>
                                    <input type="text" class="form-control" id="newRegistroChoferil" name="NewContributivo.Choferil">
                                </div>
                                <div class="mb-3">
                                    <label for="newDepartamentoEstado" class="form-label">State Department Registry Number</label>
                                    <input type="text" class="form-control" id="newDepartamentoEstado" name="NewContributivo.DeptEstado">
                                </div>
                            </form>
                        </div>
                        <div class="tab-pane fade" id="modal-administrativo" role="tabpanel" aria-labelledby="modal-administrativo-tab">
                            <form id="createAdministrativoForm" method="post" action="@Url.Action("Create", "Dashboard")">
                                <!-- Administrativo Fields -->
                                <input type="hidden" id="newIDAdministrativo" name="NewAdministrativo.ID">
                                <div class="mb-3">
                                    <label for="newFechaContrato" class="form-label">Contract Date</label>
                                    <input type="date" class="form-control" id="newFechaContrato" name="NewAdministrativo.Contrato" required>
                                </div>
                                <div class="mb-3">
                                    <label for="newTipoFacturacion" class="form-label">Hourly Billing Rate</label>
                                    <input type="text" class="form-control" id="newTipoFacturacion" name="NewAdministrativo.Facturacion" required>
                                </div>
                                <div class="mb-3">
                                    <label for="newFacturacionBase" class="form-label">Monthly Billing Rate</label>
                                    <input type="text" class="form-control" id="newFacturacionBase" name="NewAdministrativo.FacturacionBase">
                                </div>
                                <div class="mb-3">
                                    <label for="newIVU" class="form-label">IVU</label>
                                    <input type="text" class="form-control" id="newIVU" name="NewAdministrativo.IVU">
                                </div>
                                <div class="mb-3">
                                    <label for="newStaff" class="form-label">Staff</label>
                                    <input type="text" class="form-control" id="newStaff" name="NewAdministrativo.Staff">
                                </div>
                                <div class="mb-3">
                                    <label for="newStaffDate" class="form-label">Staff Assignment Date</label>
                                    <input type="date" class="form-control" id="newStaffDate" name="NewAdministrativo.StaffDate">
                                </div>
                            </form>
                        </div>
                        <div class="tab-pane fade" id="modal-identificacion" role="tabpanel" aria-labelledby="modal-identificacion-tab">
                            <form id="createIdentificacionForm" method="post" action="@Url.Action("Create", "Dashboard")">
                                <!-- Identificacion Fields -->
                                <input type="hidden" id="newIDIdentificacion" name="NewIdentificacion.ID">
                                <div class="mb-3">
                                    <label for="newAccionista" class="form-label">Shareholder / Owner</label>
                                    <input type="text" class="form-control" id="newAccionista" name="NewIdentificacion.Accionista" required>
                                </div>
                                <div class="mb-3">
                                    <label for="newSSNA" class="form-label">Social Security Number</label>
                                    <input type="text" class="form-control" id="newSSNA" name="NewIdentificacion.SSNA" required>
                                </div>
                                <div class="mb-3">
                                    <label for="newCargo" class="form-label">Title</label>
                                    <input type="text" class="form-control" id="newCargo" name="NewIdentificacion.Cargo" required>
                                </div>
                                <div class="mb-3">
                                    <label for="newLicConducir" class="form-label">Driver's License</label>
                                    <input type="text" class="form-control" id="newLicConducir" name="NewIdentificacion.LicConducir" required>
                                </div>
                                <div class="mb-3">
                                    <label for="newNacimiento" class="form-label">Birth Date</label>
                                    <input type="date" class="form-control" id="newNacimiento" name="NewIdentificacion.Nacimiento" required>
                                </div>
                            </form>
                        </div>
                        <div class="tab-pane fade" id="modal-pago" role="tabpanel" aria-labelledby="modal-pago-tab">
                            <form id="createPagoForm" method="post" action="@Url.Action("Create", "Dashboard")">
                                <!-- Pago Fields -->
                                <input type="hidden" id="newIDPago" name="NewPago.ID">
                                <div class="mb-3">
                                    <label for="newClienteBanco" class="form-label">Customer's Name in Bank</label>
                                    <input type="text" class="form-control" id="newClienteBanco" name="NewPago.BankClient" required>
                                </div>
                                <div class="mb-3">
                                    <label for="newBanco" class="form-label">Bank Account</label>
                                    <input type="text" class="form-control" id="newBanco" name="NewPago.Banco" required>
                                </div>
                                <div class="mb-3">
                                    <label for="newNumRuta" class="form-label">Routing Number</label>
                                    <input type="text" class="form-control" id="newNumRuta" name="NewPago.NumRuta">
                                </div>
                                <div class="mb-3">
                                    <label for="newNombreBanco" class="form-label">Bank's Name</label>
                                    <input type="text" class="form-control" id="newNombreBanco" name="NewPago.NameBank">
                                </div>
                                <div class="mb-3">
                                    <label for="newTipoCuenta" class="form-label">Account Type</label>
                                    <select class="form-control" id="newTipoCuenta" name="NewPago.TipoCuenta" required>
                                        <option value="">--Select--</option>
                                        <option value="Commercial Checking">Commercial Checking</option>
                                        <option value="Commercial Savings">Commercial Savings</option>
                                        <option value="Personal Checking">Personal Checking</option>
                                        <option value="Personal Savings">Personal Savings</option>
                                    </select>
                                </div>

                                <div class="mb-3">
                                    <label for="newClienteBanco2" class="form-label">Secondary Customer's Name in Bank</label>
                                    <input type="text" class="form-control" id="newClienteBanco2" name="NewPago.BankClientS">
                                </div>
                                <div class="mb-3">
                                    <label for="newBanco2" class="form-label">Secondary Bank Account</label>
                                    <input type="text" class="form-control" id="newBanco2" name="NewPago.BancoS">
                                </div>
                                <div class="mb-3">
                                    <label for="newNumRuta2" class="form-label">Secondary Routing Number</label>
                                    <input type="text" class="form-control" id="newNumRuta2" name="NewPago.NumRutaS">
                                </div>
                                <div class="mb-3">
                                    <label for="newNombreBanco2" class="form-label">Secondary Bank's Name</label>
                                    <input type="text" class="form-control" id="newNombreBanco2" name="NewPago.NameBankS">
                                </div>
                                <div class="mb-3">
                                    <label for="newTipoCuenta2" class="form-label">Secondary Type of Account</label>
                                    <input type="text" class="form-control" id="newTipoCuenta2" name="NewPago.TipoCuentaS">
                                </div>
                                <div class="mb-3">
                                    <label for="newNombreTarjeta" class="form-label">Customer's Name in Card</label>
                                    <input type="text" class="form-control" id="newNombreTarjeta" name="NewPago.NameCard">
                                </div>
                                <div class="mb-3">
                                    <label for="newTarjeta" class="form-label">Credit Card Number</label>
                                    <input type="text" class="form-control" id="newTarjeta" name="NewPago.Tarjeta">
                                </div>
                                <div class="mb-3">
                                    <label for="newTipoTarjeta" class="form-label">Type of Card</label>
                                    <input type="text" class="form-control" id="newTipoTarjeta" name="NewPago.TipoTarjeta">
                                </div>
                                <div class="mb-3">
                                    <label for="newCVV" class="form-label">CVV</label>
                                    <input type="text" class="form-control" id="newCVV" name="NewPago.CVV">
                                </div>
                                <div class="mb-3">
                                    <label for="newFechaExpiracion" class="form-label">Expiration Date</label>
                                    <input type="date" class="form-control" id="newFechaExpiracion" name="NewPago.Expiracion">
                                </div>
                                <div class="mb-3">
                                    <label for="newPostalTarjeta" class="form-label">Postal Address in Card</label>
                                    <input type="text" class="form-control" id="newPostalTarjeta" name="NewPago.PostalBank">
                                </div>
                                <div class="mb-3">
                                    <label for="newNombreTarjeta2" class="form-label">Secondary Customer's Name in Card</label>
                                    <input type="text" class="form-control" id="newNombreTarjeta2" name="NewPago.NameCardS">
                                </div>
                                <div class="mb-3">
                                    <label for="newTarjeta2" class="form-label">Secondary Credit Card Number</label>
                                    <input type="text" class="form-control" id="newTarjeta2" name="NewPago.TarjetaS">
                                </div>
                                <div class="mb-3">
                                    <label for="newTipoTarjeta2" class="form-label">Secondary Type of Card</label>
                                    <input type="text" class="form-control" id="newTipoTarjeta2" name="NewPago.TipoTarjetaS">
                                </div>
                                <div class="mb-3">
                                    <label for="newCVV2" class="form-label">Secondary CVV</label>
                                    <input type="text" class="form-control" id="newCVV2" name="NewPago.CVVS">
                                </div>
                                <div class="mb-3">
                                    <label for="newFechaExpiracion2" class="form-label">Secondary Expiration Date</label>
                                    <input type="date" class="form-control" id="newFechaExpiracion2" name="NewPago.ExpiracionS">
                                </div>
                                <div class="mb-3">
                                    <label for="newPostalTarjeta2" class="form-label">Secondary Postal Address in Card</label>
                                    <input type="text" class="form-control" id="newPostalTarjeta2" name="NewPago.PostalBankS">
                                </div>
                            </form>
                        </div>
                        <div class="tab-pane fade" id="modal-confidencial" role="tabpanel" aria-labelledby="modal-confidencial-tab">
                            <form id="createConfidencialForm" method="post" action="@Url.Action("Create", "Dashboard")">
                                <!-- Confidencial Fields -->
                                <input type="hidden" id="newIDConfidencial" name="newConfidencial.ID">
                                <div class="mb-3">
                                    <label for="newUsuarioSuri" class="form-label">Username Suri</label>
                                    <input type="text" class="form-control" id="newUsuarioSuri" name="NewConfidencial.UserSuri" required>
                                </div>
                                <div class="mb-3">
                                    <label for="newContrasenaSuri" class="form-label">Password Suri</label>
                                    <input type="text" class="form-control" id="newContrasenaSuri" name="NewConfidencial.PassSuri" required>
                                </div>
                                <div class="mb-3">
                                    <label for="newUsuarioEftps" class="form-label">Username Eftps</label>
                                    <input type="text" class="form-control" id="newUsuarioEftps" name="NewConfidencial.UserEftps">
                                </div>
                                <div class="mb-3">
                                    <label for="newPIN" class="form-label">PIN</label>
                                    <input type="text" class="form-control" id="newPIN" name="NewConfidencial.PIN">
                                </div>
                                <div class="mb-3">
                                    <label for="newContrasenaEftps" class="form-label">Internet Password Eftps</label>
                                    <input type="text" class="form-control" id="newContrasenaEftps" name="NewConfidencial.PassEftps">
                                </div>
                                <div class="mb-3">
                                    <label for="newUsuarioCFSE" class="form-label">Username CFSE</label>
                                    <input type="text" class="form-control" id="newUsuarioCFSE" name="NewConfidencial.UserCFSE">
                                </div>
                                <div class="mb-3">
                                    <label for="newContrasenaCFSE" class="form-label">Password CFSE</label>
                                    <input type="text" class="form-control" id="newContrasenaCFSE" name="NewConfidencial.PassCFSE">
                                </div>
                                <div class="mb-3">
                                    <label for="newUsuarioDeptTrabajo" class="form-label">Username Department of Labor</label>
                                    <input type="text" class="form-control" id="newUsuarioDeptTrabajo" name="NewConfidencial.UserDept">
                                </div>
                                <div class="mb-3">
                                    <label for="newContrasenaDeptTrabajo" class="form-label">Password Department of Labor</label>
                                    <input type="text" class="form-control" id="newContrasenaDeptTrabajo" name="NewConfidencial.PassDept">
                                </div>
                                <div class="mb-3">
                                    <label for="newUsuarioCofim" class="form-label">Username Cofim</label>
                                    <input type="text" class="form-control" id="newUsuarioCofim" name="NewConfidencial.UserCofim">
                                </div>
                                <div class="mb-3">
                                    <label for="newContrasenaCofim" class="form-label">Password Cofim</label>
                                    <input type="text" class="form-control" id="newContrasenaCofim" name="NewConfidencial.PassCofim">
                                </div>
                                <div class="mb-3">
                                    <label for="newUsuarioMunicipio" class="form-label">Username Municipality</label>
                                    <input type="text" class="form-control" id="newUsuarioMunicipio" name="NewConfidencial.UserMunicipio">
                                </div>
                                <div class="mb-3">
                                    <label for="newContrasenaMunicipio" class="form-label">Password Municipality</label>
                                    <input type="text" class="form-control" id="newContrasenaMunicipio" name="NewConfidencial.PassMunicipio">
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary close-button" data-bs-dismiss="modal">Close</button>
                    <button id="submitAllFormsButton" type="button" class="btn btn-primary submit-button">Create New Customer</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="importModal" tabindex="-1" aria-labelledby="importModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="importModalLabel">Import Customer from Excel</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="importExcelForm">
                        <div class="mb-3">
                            <label for="excelFileInput" class="form-label">Select Excel file</label>
                            <input type="file" class="form-control" id="excelFileInput" name="excelFile" accept=".xlsx, .xls">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary close-button" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary submit-button" id="submitImportButton">Import</button>
                </div>
            </div>
        </div>
    </div>




    <div class="tab-content" id="dashboardTabsContent">
        <!-- Demográficos Tab Content -->
        <div class="tab-pane fade show active" id="demograficos" role="tabpanel" aria-labelledby="demograficos-tab">
            <div id="tblDataWrapper" class="dataTableWrapper">
                <div class="d-flex justify-content-start mt-3">
                    <button type="button" class="btn btn-success export-button" id="exportToExcelButton">
                        Export to Excel
                    </button>
                </div>
                @foreach (var item in Model.Demograficos)
                {
                    <table class="table table-striped table-bordered tblData" data-nombre="@item.Nombre" data-nombrecomercial="@item.NombreComercial" data-id="@item.ID">
                        <tbody>
                            @* <tr><th>ID</th><td>@item.ID</td></tr> *@
                            <tr><th>Name</th><td>@item.Nombre</td></tr>
                            <tr><th>Commercial Name</th><td>@item.NombreComercial</td></tr>
                            <tr><th>Phone Number</th><td>@item.Telefono</td></tr>
                            <tr><th>Mobile Number</th><td>@item.Celular</td></tr>
                            <tr><th>Address</th><td>@item.Dir</td></tr>
                            <tr><th>Business Type</th><td>@item.Tipo</td></tr>
                            <tr><th>Federal Employer Identification Number</th><td>@item.Patronal</td></tr>
                            <tr><th>Social Security Number</th><td>@item.SSN</td></tr>
                            <tr><th>Date of Incorporation</th><td>@item.Incorporacion</td></tr>
                            <tr><th>Operations Start Date</th><td>@item.Operaciones</td></tr>
                            <tr><th>Industry</th><td>@item.Industria</td></tr>
                            <tr><th>NAICS Code</th><td>@item.NAICS</td></tr>
                            <tr><th>Description</th><td>@item.Descripcion</td></tr>
                            <tr><th>Contact</th><td>@item.Contacto</td></tr>
                            <tr><th>Physical Address</th><td>@item.DirFisica</td></tr>
                            <tr><th>Postal Address</th><td>@item.DirPostal</td></tr>
                            <tr><th>Email</th><td>@item.Email</td></tr>
                            <tr><th>Secondary Email</th><td>@item.Email2</td></tr>
                        </tbody>
                    </table>
                    <button type="button" class="btn btn-primary edit-button" data-id="@item.ID" onclick="editDemografico('@item.ID')">Update</button>
                    <button type="button" class="btn btn-danger delete-button" data-id="@item.ID" onclick="deleteCustomer('@item.ID')">Delete</button>

                }
            </div>
        </div>

        <!-- Contributivos Tab Content -->
        <div class="tab-pane fade" id="contributivos" role="tabpanel" aria-labelledby="contributivos-tab">
            <div id="tblDataWrapper" class="dataTableWrapper">
                <div class="d-flex justify-content-start mt-3">
                    <button type="button" class="btn btn-success export-button" id="exportToExcelButton">
                        Export to Excel
                    </button>

                </div>
                @foreach (var item in Model.Contributivos)
                {
                    <table class="table table-striped table-bordered tblData" data-nombre="@item.Nombre" data-nombrecomercial="@item.NombreComercial" data-id="@item.ID">
                        <tbody>
                            @* <tr><th>ID</th><td>@item.ID</td></tr> *@
                            <tr><th>Name</th><td>@item.Nombre</td></tr>
                            <tr><th>Commercial Name</th><td>@item.NombreComercial</td></tr>
                            <tr><th>State Identification Number</th><td>@item.Estatal</td></tr>
                            <tr><th>CFSE Policy Number</th><td>@item.Poliza</td></tr>
                            <tr><th>Merchant Registry Number</th><td>@item.RegComerciante</td></tr>
                            <tr><th>Expiration Date</th><td>@item.Vencimiento</td></tr>
                            <tr><th>Chauffeur's Insurance Account Number</th><td>@item.Choferil</td></tr>
                            <tr><th>State Department Registry Number</th><td>@item.DeptEstado</td></tr>
                        </tbody>
                    </table>
                    <button type="button" class="btn btn-primary edit-button" data-id="@item.ID" onclick="editContributivo('@item.ID')">Update</button>
                    <button type="button" class="btn btn-danger delete-button" data-id="@item.ID" onclick="deleteCustomer('@item.ID')">Delete</button>
                }
            </div>
        </div>

        <!-- Administrativos Tab Content -->
        <div class="tab-pane fade" id="administrativos" role="tabpanel" aria-labelledby="administrativos-tab">
            <div id="tblDataWrapper" class="dataTableWrapper">
                <div class="d-flex justify-content-start mt-3">
                    <button type="button" class="btn btn-success export-button" id="exportToExcelButton">
                        Export to Excel
                    </button>

                </div>
                @foreach (var item in Model.Administrativos)
                {
                    <table class="table table-striped table-bordered tblData" data-nombre="@item.Nombre" data-nombrecomercial="@item.NombreComercial" data-id="@item.ID">
                        <tbody>
                            @* <tr><th>ID</th><td>@item.ID</td></tr> *@
                            <tr><th>Name</th><td>@item.Nombre</td></tr>
                            <tr><th>Commercial Name</th><td>@item.NombreComercial</td></tr>
                            <tr><th>Contract Date</th><td>@item.Contrato</td></tr>
                            <tr><th>Hourly Billing Rate</th><td>@item.Facturacion</td></tr>
                            <tr><th>Monthly Billing Rate</th><td>@item.FacturacionBase</td></tr>
                            <tr><th>IVU</th><td>@item.IVU</td></tr>
                            <tr><th>Staff</th><td>@item.Staff</td></tr>
                            <tr><th>Staff Assignment Date</th><td>@item.StaffDate</td></tr>
                        </tbody>
                    </table>
                    <button type="button" class="btn btn-primary edit-button" data-id="@item.ID" onclick="editAdministrativo('@item.ID')">Update</button>
                    <button type="button" class="btn btn-danger delete-button" data-id="@item.ID" onclick="deleteCustomer('@item.ID')">Delete</button>
                }
            </div>
        </div>

        <!-- Identificación Tab Content -->
        <div class="tab-pane fade" id="identificacion" role="tabpanel" aria-labelledby="identificacion-tab">
            <div id="tblDataWrapper" class="dataTableWrapper">
                <div class="d-flex justify-content-start mt-3">
                    <button type="button" class="btn btn-success export-button" id="exportToExcelButton">
                        Export to Excel
                    </button>

                </div>
                @foreach (var item in Model.Identificaciones)
                {
                    <table class="table table-striped table-bordered tblData" data-nombre="@item.Nombre" data-nombrecomercial="@item.NombreComercial" data-id="@item.ID">
                        <tbody>
                            @* <tr><th>ID</th><td>@item.ID</td></tr> *@
                            <tr><th>Name</th><td>@item.Nombre</td></tr>
                            <tr><th>Commercial Name</th><td>@item.NombreComercial</td></tr>
                            <tr><th>Shareholder / Owner</th><td>@item.Accionista</td></tr>
                            <tr><th>Social Security Number</th><td>@item.SSNA</td></tr>
                            <tr><th>Title</th><td>@item.Cargo</td></tr>
                            <tr><th>Driver's License</th><td>@item.LicConducir</td></tr>
                            <tr><th>Birth Date</th><td>@item.Nacimiento</td></tr>
                        </tbody>
                    </table>
                    <button type="button" class="btn btn-primary edit-button" data-id="@item.ID" onclick="editIdentificacion('@item.ID')">Update</button>
                    <button type="button" class="btn btn-danger delete-button" data-id="@item.ID" onclick="deleteCustomer('@item.ID')">Delete</button>
                }
            </div>
        </div>

        <!-- Métodos de Pago Tab Content -->
        <div class="tab-pane fade" id="metodo-de-pago" role="tabpanel" aria-labelledby="metodo-de-pago-tab">
            <div id="tblDataWrapper" class="dataTableWrapper">
                <div class="d-flex justify-content-start mt-3">
                    <button type="button" class="btn btn-success export-button" id="exportToExcelButton">
                        Export to Excel
                    </button>

                </div>
                @foreach (var item in Model.Pagos)
                {
                    <table class="table table-striped table-bordered tblData" data-nombre="@item.Nombre" data-nombrecomercial="@item.NombreComercial" data-id="@item.ID">
                        <tbody>
                            @* <tr><th>ID</th><td>@item.ID</td></tr> *@
                            <tr><th>Name</th><td>@item.Nombre</td></tr>
                            <tr><th>Commercial Name</th><td>@item.NombreComercial</td></tr>
                            <tr><th>Customer's Name in Bank</th><td>@item.BankClient</td></tr>
                            <tr><th>Bank Account</th><td>@item.Banco</td></tr>
                            <tr><th>Routing Number</th><td>@item.NumRuta</td></tr>
                            <tr><th>Bank's Name</th><td>@item.NameBank</td></tr>
                            <tr><th>Account Type</th><td>@item.TipoCuenta</td></tr>
                            <tr><th>Secondary Customer's Name in Bank</th><td>@item.BankClientS</td></tr>
                            <tr><th>Secondary Bank Account</th><td>@item.BancoS</td></tr>
                            <tr><th>Secondary Routing Number</th><td>@item.NumRutaS</td></tr>
                            <tr><th>Secondary Bank's Name</th><td>@item.NameBankS</td></tr>
                            <tr><th>Secondary Account Type</th><td>@item.TipoCuentaS</td></tr>
                            <tr><th>Customer's Name in Card</th><td>@item.NameCard</td></tr>
                            <tr><th>Credit Card Number</th><td>@item.Tarjeta</td></tr>
                            <tr><th>Type of Card</th><td>@item.TipoTarjeta</td></tr>
                            <tr><th>CVV</th><td>@item.CVV</td></tr>
                            <tr><th>Expiration Date</th><td>@item.Expiracion</td></tr>
                            <tr><th>Postal Address in Card</th><td>@item.PostalBank</td></tr>
                            <tr><th>Secondary Customer's Name in Card</th><td>@item.NameCardS</td></tr>
                            <tr><th>Secondary Credit Card Number</th><td>@item.TarjetaS</td></tr>
                            <tr><th>Secondary Type of Card</th><td>@item.TipoTarjetaS</td></tr>
                            <tr><th>Secondary CVV</th><td>@item.CVVS</td></tr>
                            <tr><th>Secondary Expiration Date</th><td>@item.ExpiracionS</td></tr>
                            <tr><th>Secondary Postal Address in Card</th><td>@item.PostalBankS</td></tr>
                        </tbody>
                    </table>
                    <button type="button" class="btn btn-primary edit-button" data-id="@item.ID" onclick="editPago('@item.ID')">Update</button>
                    <button type="button" class="btn btn-danger delete-button" data-id="@item.ID" onclick="deleteCustomer('@item.ID')">Delete</button>
                }
            </div>
        </div>

        <!-- Confidenciales Tab Content -->
        <div class="tab-pane fade" id="confidencial" role="tabpanel" aria-labelledby="confidencial-tab">
            <div id="tblDataWrapper" class="dataTableWrapper">
                <div class="d-flex justify-content-start mt-3">
                    <button type="button" class="btn btn-success export-button" id="exportToExcelButton">
                        Export to Excel
                    </button>

                </div>
                @foreach (var item in Model.Confidenciales)
                {
                    <table class="table table-striped table-bordered tblData" data-nombre="@item.Nombre" data-nombrecomercial="@item.NombreComercial" data-id="@item.ID">
                        <tbody>
                            @* <tr><th>ID</th><td>@item.ID</td></tr> *@
                            <tr><th>Name</th><td>@item.Nombre</td></tr>
                            <tr><th>Commercial Name</th><td>@item.NombreComercial</td></tr>
                            <tr><th>Username Suri</th><td>@item.UserSuri</td></tr>
                            <tr><th>Password Suri</th><td>@item.PassSuri</td></tr>
                            <tr><th>Username Eftps</th><td>@item.UserEftps</td></tr>
                            <tr><th>PIN</th><td>@item.PIN</td></tr>
                            <tr><th>Internet Password Eftps</th><td>@item.PassEftps</td></tr>
                            <tr><th>Username CFSE</th><td>@item.UserCFSE</td></tr>
                            <tr><th>Password CFSE</th><td>@item.PassCFSE</td></tr>
                            <tr><th>Username Deptartment of Labor</th><td>@item.UserDept</td></tr>
                            <tr><th>Password Deptartment of Labor</th><td>@item.PassDept</td></tr>
                            <tr><th>Username Cofim</th><td>@item.UserCofim</td></tr>
                            <tr><th>Password Cofim</th><td>@item.PassCofim</td></tr>
                            <tr><th>Username Municipality</th><td>@item.UserMunicipio</td></tr>
                            <tr><th>Password Municipality</th><td>@item.PassMunicipio</td></tr>
                        </tbody>
                    </table>
                    <button type="button" class="btn btn-primary edit-button" data-id="@item.ID" onclick="editConfidencial('@item.ID')">Update</button>
                    <button type="button" class="btn btn-danger delete-button" data-id="@item.ID" onclick="deleteCustomer('@item.ID')">Delete</button>
                }
            </div>
        </div>

        <!-- Offcanvas for editing demográficos details -->
        <div class="offcanvas offcanvas-start" tabindex="-1" id="editDemograficoOffcanvas" aria-labelledby="editDemograficoOffcanvasLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="editDemograficoOffcanvasLabel">Edit Demographic Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <form id="editDemograficoForm">
                    <input type="hidden" id="demograficoId" name="ID" />
                    <input type="hidden" id="demograficoCID" name="CID" />
                    <input type="hidden" id="demograficoMID" name="MID" />

                    <div class="mb-3">
                        <label for="demograficoNombre" class="form-label">Name</label>
                        <input type="text" class="form-control" id="demograficoNombre" name="Nombre">
                    </div>
                    <div class="mb-3">
                        <label for="demograficoNombreComercial" class="form-label">Commercial Name</label>
                        <input type="text" class="form-control" id="demograficoNombreComercial" name="NombreComercial">
                    </div>
                    <div class="mb-3">
                        <label for="demograficoTelefono" class="form-label">Phone Number</label>
                        <input type="text" class="form-control" id="demograficoTelefono" name="Telefono">
                    </div>
                    <div class="mb-3">
                        <label for="demograficoCelular" class="form-label">Mobile Number</label>
                        <input type="text" class="form-control" id="demograficoCelular" name="Celular">
                    </div>
                    <div class="mb-3">
                        <label for="demograficoDir" class="form-label">Address</label>
                        <input type="text" class="form-control" id="demograficoDir" name="Dir">
                    </div>
                    <div class="mb-3">
                        <label for="demograficoTipo" class="form-label">Business Type</label>
                        <select class="form-control" id="demograficoTipo" name="Tipo" required>
                            <option value="">--Select--</option>
                            <option value="Soleproprietor">Soleproprietor</option>
                            <option value="Corporation">Corporation</option>
                            <option value="LLC">LLC</option>
                            <option value="Partnership">Partnership</option>
                            <option value="Non for Profit">Non for Profit</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="demograficoPatronal" class="form-label">Federal Employer Identification Number</label>
                        <input type="text" class="form-control" id="demograficoPatronal" name="Patronal">
                    </div>
                    <div class="mb-3">
                        <label for="demograficoSSN" class="form-label">Social Security Number</label>
                        <input type="text" class="form-control" id="demograficoSSN" name="SSN">
                    </div>
                    <div class="mb-3">
                        <label for="demograficoIncorporacion" class="form-label">Date of Incorporation</label>
                        <input type="datetime-local" class="form-control" id="demograficoIncorporacion" name="Incorporacion">
                    </div>
                    <div class="mb-3">
                        <label for="demograficoOperaciones" class="form-label">Operations Start Date</label>
                        <input type="datetime-local" class="form-control" id="demograficoOperaciones" name="Operaciones">
                    </div>
                    <div class="mb-3">
                        <label for="demograficoIndustria" class="form-label">Industry</label>
                        <input type="text" class="form-control" id="demograficoIndustria" name="Industria">
                    </div>
                    <div class="mb-3">
                        <label for="demograficoNAICS" class="form-label">NAICS Code</label>
                        <input type="text" class="form-control" id="demograficoNAICS" name="NAICS">
                    </div>
                    <div class="mb-3">
                        <label for="demograficoDescripcion" class="form-label">Description</label>
                        <input type="text" class="form-control" id="demograficoDescripcion" name="Descripcion">
                    </div>
                    <div class="mb-3">
                        <label for="demograficoContacto" class="form-label">Contact</label>
                        <input type="text" class="form-control" id="demograficoContacto" name="Contacto">
                    </div>
                    <div class="mb-3">
                        <label for="demograficoDirFisica" class="form-label">Physical Address</label>
                        <input type="text" class="form-control" id="demograficoDirFisica" name="DirFisica">
                    </div>
                    <div class="mb-3">
                        <label for="demograficoDirPostal" class="form-label">Postal Address</label>
                        <input type="text" class="form-control" id="demograficoDirPostal" name="DirPostal">
                    </div>
                    <div class="mb-3">
                        <label for="demograficoEmail" class="form-label">Email</label>
                        <input type="email" class="form-control" id="demograficoEmail" name="Email">
                    </div>
                    <div class="mb-3">
                        <label for="demograficoEmail2" class="form-label">Secondary Email</label>
                        <input type="email" class="form-control" id="demograficoEmail2" name="Email2">
                    </div>
                    <button type="submit" class="btn save-button">Save</button>
                </form>
            </div>
        </div>

        <!-- Offcanvas for editing Contributivos details -->
        <div class="offcanvas offcanvas-start" tabindex="-1" id="editContributivoOffcanvas" aria-labelledby="editContributivoOffcanvasLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="editContributivoOffcanvasLabel">Edit Tax Matter Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <form id="editContributivoForm">
                    <input type="hidden" id="contributivoId" name="ID" />
                    <input type="hidden" id="contributivoCID" name="CID" />
                    <input type="hidden" id="contributivoMID" name="MID" />

                    <div class="mb-3">
                        <label for="contributivoNombre" class="form-label">Name</label>
                        <input type="text" class="form-control" id="contributivoNombre" name="Nombre">
                    </div>
                    <div class="mb-3">
                        <label for="contributivoNombreComercial" class="form-label">Commercial Name</label>
                        <input type="text" class="form-control" id="contributivoNombreComercial" name="NombreComercial">
                    </div>
                    <div class="mb-3">
                        <label for="contributivoEstatal" class="form-label">State Identification Number</label>
                        <input type="text" class="form-control" id="contributivoEstatal" name="Estatal">
                    </div>
                    <div class="mb-3">
                        <label for="contributivoPoliza" class="form-label">CFSE Policy Number</label>
                        <input type="text" class="form-control" id="contributivoPoliza" name="Poliza">
                    </div>
                    <div class="mb-3">
                        <label for="contributivoRegComerciante" class="form-label">Merchant Registry Number</label>
                        <input type="text" class="form-control" id="contributivoRegComerciante" name="RegComerciante">
                    </div>
                    <div class="mb-3">
                        <div class="mb-3">
                            <label for="contributivoVencimiento" class="form-label">Expiration Date</label>
                            <input type="date" class="form-control" id="contributivoVencimiento" name="Vencimiento">
                        </div>

                    </div>
                    <div class="mb-3">
                        <label for="contributivoChoferil" class="form-label">Chauffeur's Insurance Account Number</label>
                        <input type="text" class="form-control" id="contributivoChoferil" name="Choferil">
                    </div>
                    <div class="mb-3">
                        <label for="contributivoDeptEstado" class="form-label">State Department Registry Number</label>
                        <input type="text" class="form-control" id="contributivoDeptEstado" name="DeptEstado">
                    </div>
                    <button type="submit" class="btn save-button">Save</button>
                </form>
            </div>
        </div>

        <!-- Offcanvas for editing Administrativos details -->
        <div class="offcanvas offcanvas-start" tabindex="-1" id="editAdministrativoOffcanvas" aria-labelledby="editAdministrativoOffcanvasLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="editAdministrativoOffcanvasLabel">Edit Administrative Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <form id="editAdministrativoForm">
                    <input type="hidden" id="administrativoId" name="ID" />
                    <input type="hidden" id="administrativoCID" name="CID" />
                    <input type="hidden" id="administrativoMID" name="MID" />

                    <div class="mb-3">
                        <label for="administrativoNombre" class="form-label">Name</label>
                        <input type="text" class="form-control" id="administrativoNombre" name="Nombre">
                    </div>
                    <div class="mb-3">
                        <label for="administrativoNombreComercial" class="form-label">Commercial Name</label>
                        <input type="text" class="form-control" id="administrativoNombreComercial" name="NombreComercial">
                    </div>
                    <div class="mb-3">
                        <label for="administrativoContrato" class="form-label">Contract Date</label>
                        <input type="datetime-local" class="form-control" id="administrativoContrato" name="Contrato">
                    </div>
                    <div class="mb-3">
                        <label for="administrativoFacturacion" class="form-label">Hourly Billing Rate</label>
                        <input type="text" class="form-control" id="administrativoFacturacion" name="Facturacion">
                    </div>
                    <div class="mb-3">
                        <label for="administrativoFacturacionBase" class="form-label">Monthly Billing Rate</label>
                        <input type="text" class="form-control" id="administrativoFacturacionBase" name="FacturacionBase">
                    </div>
                    <div class="mb-3">
                        <label for="administrativoIVU" class="form-label">IVU</label>
                        <input type="text" class="form-control" id="administrativoIVU" name="IVU">
                    </div>
                    <div class="mb-3">
                        <label for="administrativoStaff" class="form-label">Staff</label>
                        <input type="text" class="form-control" id="administrativoStaff" name="Staff">
                    </div>
                    <div class="mb-3">
                        <label for="administrativoStaffDate" class="form-label">Staff Assignment Date</label>
                        <input type="datetime-local" class="form-control" id="administrativoStaffDate" name="StaffDate">
                    </div>
                    <button type="submit" class="btn save-button">Save</button>
                </form>
            </div>
        </div>

        <!-- Offcanvas for editing Identificación details -->
        <div class="offcanvas offcanvas-start" tabindex="-1" id="editIdentificacionOffcanvas" aria-labelledby="editIdentificacionOffcanvasLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="editIdentificacionOffcanvasLabel">Edit Identification Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <form id="editIdentificacionForm">
                    <input type="hidden" id="identificacionId" name="ID" />
                    <input type="hidden" id="identificacionCID" name="CID" />
                    <input type="hidden" id="identificacionMID" name="MID" />

                    <div class="mb-3">
                        <label for="identificacionNombre" class="form-label">Name</label>
                        <input type="text" class="form-control" id="identificacionNombre" name="Nombre">
                    </div>
                    <div class="mb-3">
                        <label for="identificacionNombreComercial" class="form-label">Commercial Name</label>
                        <input type="text" class="form-control" id="identificacionNombreComercial" name="NombreComercial">
                    </div>
                    <div class="mb-3">
                        <label for="identificacionAccionista" class="form-label">Shareholder / Owner</label>
                        <input type="text" class="form-control" id="identificacionAccionista" name="Accionista">
                    </div>
                    <div class="mb-3">
                        <label for="identificacionSSNA" class="form-label">Social Security Number</label>
                        <input type="text" class="form-control" id="identificacionSSNA" name="SSNA">
                    </div>
                    <div class="mb-3">
                        <label for="identificacionCargo" class="form-label">Title</label>
                        <input type="text" class="form-control" id="identificacionCargo" name="Cargo">
                    </div>
                    <div class="mb-3">
                        <label for="identificacionLicConducir" class="form-label">Driver's License</label>
                        <input type="text" class="form-control" id="identificacionLicConducir" name="LicConducir">
                    </div>
                    <div class="mb-3">
                        <label for="identificacionNacimiento" class="form-label">Birth Date</label>
                        <input type="datetime-local" class="form-control" id="identificacionNacimiento" name="Nacimiento">
                    </div>
                    <button type="submit" class="btn save-button">Save</button>
                </form>
            </div>
        </div>

        <!-- Offcanvas for editing Pagos details -->
        <div class="offcanvas offcanvas-start" tabindex="-1" id="editPagoOffcanvas" aria-labelledby="editPagoOffcanvasLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="editPagoOffcanvasLabel">Edit Payment Method Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <form id="editPagoForm">
                    <input type="hidden" id="pagoId" name="ID" />
                    <input type="hidden" id="pagoCID" name="CID" />
                    <input type="hidden" id="pagoMID" name="MID" />

                    <div class="mb-3">
                        <label for="pagoNombre" class="form-label">Name</label>
                        <input type="text" class="form-control" id="pagoNombre" name="Nombre">
                    </div>
                    <div class="mb-3">
                        <label for="pagoNombreComercial" class="form-label">Commercial Name</label>
                        <input type="text" class="form-control" id="pagoNombreComercial" name="NombreComercial">
                    </div>
                    <div class="mb-3">
                        <label for="pagoBankClient" class="form-label">Customer's Name in Bank</label>
                        <input type="text" class="form-control" id="pagoBankClient" name="BankClient">
                    </div>
                    <div class="mb-3">
                        <label for="pagoBanco" class="form-label">Bank Account</label>
                        <input type="text" class="form-control" id="pagoBanco" name="Banco">
                    </div>
                    <div class="mb-3">
                        <label for="pagoNumRuta" class="form-label">Routing Number</label>
                        <input type="text" class="form-control" id="pagoNumRuta" name="NumRuta">
                    </div>
                    <div class="mb-3">
                        <label for="pagoNameBank" class="form-label">Bank's Name</label>
                        <input type="text" class="form-control" id="pagoNameBank" name="NameBank">
                    </div>
                    <div class="mb-3">
                        <label for="pagoTipoCuenta" class="form-label">Account Type</label>
                        <select class="form-control" id="pagoTipoCuenta" name="TipoCuenta" required>
                            <option value="">--Select--</option>
                            <option value="Commercial Checking">Commercial Checking</option>
                            <option value="Commercial Savings">Commercial Savings</option>
                            <option value="Personal Checking">Personal Checking</option>
                            <option value="Personal Savings">Personal Savings</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="pagoBankClientS" class="form-label">Secondary Customer's Name in Bank</label>
                        <input type="text" class="form-control" id="pagoBankClientS" name="BankClientS">
                    </div>
                    <div class="mb-3">
                        <label for="pagoBancoS" class="form-label">Secondary Bank Account</label>
                        <input type="text" class="form-control" id="pagoBancoS" name="BancoS">
                    </div>
                    <div class="mb-3">
                        <label for="pagoNumRutaS" class="form-label">Secondary Routing Number 2</label>
                        <input type="text" class="form-control" id="pagoNumRutaS" name="NumRutaS">
                    </div>
                    <div class="mb-3">
                        <label for="pagoNameBankS" class="form-label">Secondary Bank's Name</label>
                        <input type="text" class="form-control" id="pagoNameBankS" name="NameBankS">
                    </div>
                    <div class="mb-3">
                        <label for="pagoTipoCuentaS" class="form-label">Secondary Account Type</label>
                        <input type="text" class="form-control" id="pagoTipoCuentaS" name="TipoCuentaS">
                    </div>
                    <div class="mb-3">
                        <label for="pagoNameCard" class="form-label">Customer's Name in Card</label>
                        <input type="text" class="form-control" id="pagoNameCard" name="NameCard">
                    </div>
                    <div class="mb-3">
                        <label for="pagoTarjeta" class="form-label">Credit Card Number</label>
                        <input type="text" class="form-control" id="pagoTarjeta" name="Tarjeta">
                    </div>
                    <div class="mb-3">
                        <label for="pagoTipoTarjeta" class="form-label">Type of Card</label>
                        <input type="text" class="form-control" id="pagoTipoTarjeta" name="TipoTarjeta">
                    </div>
                    <div class="mb-3">
                        <label for="pagoCVV" class="form-label">CVV</label>
                        <input type="text" class="form-control" id="pagoCVV" name="CVV">
                    </div>
                    <div class="mb-3">
                        <label for="pagoExpiracion" class="form-label">Expiration Date</label>
                        <input type="datetime-local" class="form-control" id="pagoExpiracion" name="Expiracion">
                    </div>
                    <div class="mb-3">
                        <label for="pagoPostalBank" class="form-label">Postal Address in Card</label>
                        <input type="text" class="form-control" id="pagoPostalBank" name="PostalBank">
                    </div>
                    <div class="mb-3">
                        <label for="pagoNameCardS" class="form-label">Secondary Customer's Name in Card</label>
                        <input type="text" class="form-control" id="pagoNameCardS" name="NameCardS">
                    </div>
                    <div class="mb-3">
                        <label for="pagoTarjetaS" class="form-label">Secondary Credit Card Number</label>
                        <input type="text" class="form-control" id="pagoTarjetaS" name="TarjetaS">
                    </div>
                    <div class="mb-3">
                        <label for="pagoTipoTarjetaS" class="form-label">Secondary Type of Card2</label>
                        <input type="text" class="form-control" id="pagoTipoTarjetaS" name="TipoTarjetaS">
                    </div>
                    <div class="mb-3">
                        <label for="pagoCVVS" class="form-label">Secondary CVV</label>
                        <input type="text" class="form-control" id="pagoCVVS" name="CVVS">
                    </div>
                    <div class="mb-3">
                        <label for="pagoExpiracionS" class="form-label">Secondary Expiration Date</label>
                        <input type="datetime-local" class="form-control" id="pagoExpiracionS" name="ExpiracionS">
                    </div>
                    <div class="mb-3">
                        <label for="pagoPostalBankS" class="form-label">Secondary Postal Address in Card</label>
                        <input type="text" class="form-control" id="pagoPostalBankS" name="PostalBankS">
                    </div>
                    <button type="submit" class="btn save-button">Save</button>
                </form>
            </div>
        </div>

        <!-- Offcanvas for editing Confidenciales details -->
        <div class="offcanvas offcanvas-start" tabindex="-1" id="editConfidencialOffcanvas" aria-labelledby="editConfidencialOffcanvasLabel">
            <div class="offcanvas-header">
                <h5 class="offcanvas-title" id="editConfidencialOffcanvasLabel">Edit Confidential Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
                <form id="editConfidencialForm">
                    <input type="hidden" id="confidencialId" name="ID" />
                    <input type="hidden" id="confidencialCID" name="CID" />
                    <input type="hidden" id="confidencialMID" name="MID" />

                    <div class="mb-3">
                        <label for="confidencialNombre" class="form-label">Name</label>
                        <input type="text" class="form-control" id="confidencialNombre" name="Nombre">
                    </div>
                    <div class="mb-3">
                        <label for="confidencialNombreComercial" class="form-label">Commercial Name</label>
                        <input type="text" class="form-control" id="confidencialNombreComercial" name="NombreComercial">
                    </div>
                    <div class="mb-3">
                        <label for="confidencialUserSuri" class="form-label">Username Suri</label>
                        <input type="text" class="form-control" id="confidencialUserSuri" name="UserSuri">
                    </div>
                    <div class="mb-3">
                        <label for="confidencialPassSuri" class="form-label">Password Suri</label>
                        <input type="text" class="form-control" id="confidencialPassSuri" name="PassSuri">
                    </div>
                    <div class="mb-3">
                        <label for="confidencialUserEftps" class="form-label">Username Eftps</label>
                        <input type="text" class="form-control" id="confidencialUserEftps" name="UserEftps">
                    </div>
                    <div class="mb-3">
                        <label for="confidencialPIN" class="form-label">PIN</label>
                        <input type="text" class="form-control" id="confidencialPIN" name="PIN">
                    </div>
                    <div class="mb-3">
                        <label for="confidencialPassEftps" class="form-label">Internet Password Eftps</label>
                        <input type="text" class="form-control" id="confidencialPassEftps" name="PassEftps">
                    </div>
                    <div class="mb-3">
                        <label for="confidencialUserCFSE" class="form-label">Username CFSE</label>
                        <input type="text" class="form-control" id="confidencialUserCFSE" name="UserCFSE">
                    </div>
                    <div class="mb-3">
                        <label for="confidencialPassCFSE" class="form-label">Password CFSE</label>
                        <input type="text" class="form-control" id="confidencialPassCFSE" name="PassCFSE">
                    </div>
                    <div class="mb-3">
                        <label for="confidencialUserDept" class="form-label">Username Department of Labor</label>
                        <input type="text" class="form-control" id="confidencialUserDept" name="UserDept">
                    </div>
                    <div class="mb-3">
                        <label for="confidencialPassDept" class="form-label">Password Department of Labor</label>
                        <input type="text" class="form-control" id="confidencialPassDept" name="PassDept">
                    </div>
                    <div class="mb-3">
                        <label for="confidencialUserCofim" class="form-label">Username Cofim</label>
                        <input type="text" class="form-control" id="confidencialUserCofim" name="UserCofim">
                    </div>
                    <div class="mb-3">
                        <label for="confidencialPassCofim" class="form-label">Password Cofim</label>
                        <input type="text" class="form-control" id="confidencialPassCofim" name="PassCofim">
                    </div>
                    <div class="mb-3">
                        <label for="confidencialUserMunicipio" class="form-label">Username Municipality</label>
                        <input type="text" class="form-control" id="confidencialUserMunicipio" name="UserMunicipio">
                    </div>
                    <div class="mb-3">
                        <label for="confidencialPassMunicipio" class="form-label">Password Municipality</label>
                        <input type="text" class="form-control" id="confidencialPassMunicipio" name="PassMunicipio">
                    </div>
                    <button type="submit" class="btn save-button">Save</button>
                </form>
            </div>
        </div>

    </div>

</div>

@section Scripts {
    <script>
        function submitAllForms() {
            // Get the ID from the Demografico form
            const id = document.getElementById('newID').value;
            console.log('newID value from Demografico =' + id);

            // Update hidden ID fields in all forms
            document.getElementById('newIDContributivo').value = id;
            console.log('newID value from Contributivo =' + document.getElementById('newIDContributivo').value);
            document.getElementById('newIDAdministrativo').value = id;
            console.log('newID value from Administrativo =' + document.getElementById('newIDAdministrativo').value);
            document.getElementById('newIDIdentificacion').value = id;
            document.getElementById('newIDPago').value = id;
            document.getElementById('newIDConfidencial').value = id;

            const forms = [
                document.getElementById('createDemograficoForm'),
                document.getElementById('createContributivoForm'),
                document.getElementById('createAdministrativoForm'),
                document.getElementById('createIdentificacionForm'),
                document.getElementById('createPagoForm'),
                document.getElementById('createConfidencialForm')
            ];

            const formData = new FormData();

            forms.forEach(form => {
                new FormData(form).forEach((value, key) => {
                    formData.append(key, value);
                });
            });

            fetch('@Url.Action("Create", "Dashboard")', {
                method: 'POST',
                body: formData,
            })
                .then(response => {
                    if (!response.ok) {
                        return response.text().then(text => { throw new Error(text); });
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.success) {
                        toastr.success('Customer records created successfully!');
                        $('#newCustomerModal').modal('hide');
                        //location.reload();  // Reload the page to update the table with the new data
                    } else {
                        toastr.error(data.message || 'Failed to create customer records.');
                        if (data.errors) {
                            data.errors.forEach(error => toastr.error(error));
                        }
                    }
                })
                .catch(error => {
                    console.error('There was a problem with the fetch operation:', error);
                    toastr.error('Failed to create customer records.');
                });
        }



        function submitActiveForm() {
            const activeTab = document.querySelector('#modalTabs .nav-link.active').getAttribute('aria-controls');
            const formId = `#${activeTab} form`;
            console.log('formId = ' + formId);
            const form = document.querySelector(formId);
            const formData = new FormData(form);
            const url = form.getAttribute('action');

            fetch(url, {
                method: 'POST',
                body: formData
            })
                .then(response => {
                    if (!response.ok) {
                        return response.text().then(text => { throw new Error(text); });
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.success) {
                        toastr.success('Customer records created successfully!');
                        $('#newCustomerModal').modal('hide');
                        location.reload();  // Reload the page to update the table with the new data
                    } else {
                        toastr.error(data.message || 'Failed to create customer records.');
                        if (data.errors) {
                            data.errors.forEach(error => toastr.error(error));
                        }
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    toastr.error('Failed to create customer records.');
                });
        }

        $(document).ready(function () {
            var isNuevoClienteClicked = false;

            $('#homeLink').on('click', function () {
                // Clear the search term from sessionStorage
                sessionStorage.removeItem('searchTerm');

                // Clear the search input value
                $('#externalSearch').val('');

                // Hide all tables and tab panes initially, excluding the creation form modal
                $('.tab-pane').addClass('hidden');
                $('.nav-tabs').addClass('hidden');
                $('#dashboardTabs').addClass('hidden-content');

                // Show default view
                $('#newCustomerModal').removeClass('show');
                $('.nav-tabs').removeClass('hidden');
                $('#dashboardTabsContent').removeClass('hidden-content');
                $('#dashboardTabs').removeClass('hidden-content');
            });

            $(document).on("click", ".export-button", function () {
                var $activeTabPane = $(this).closest(".tab-pane");
                var searchTerm = $('#externalSearch').val().toLowerCase();
                var matchingRow = null;

                // Iterate over each row within the active tab to find the matching customer
                $activeTabPane.find(".tblData").each(function () {
                    var nombre = $(this).data("nombre").toLowerCase();
                    var nombreComercial = $(this).data("nombrecomercial").toLowerCase();

                    if (nombre.includes(searchTerm) || nombreComercial.includes(searchTerm)) {
                        matchingRow = $(this);
                        return false;  // Break the loop once a match is found
                    }
                });

                if (matchingRow) {
                    var customerId = matchingRow.data("id");
                    window.location.href = `/api/export/to-excel?customerId=${encodeURIComponent(customerId)}`;
                } else {
                    alert("No matching customer found.");
                }
            });

            document.getElementById('submitImportButton').addEventListener('click', function () {
                var formData = new FormData();
                var fileInput = document.getElementById('excelFileInput');
                var file = fileInput.files[0];

                if (!file) {
                    alert("Please select a file to import.");
                    return;
                }

                formData.append('file', file);

                fetch('/api/import/from-excel', {
                    method: 'POST',
                    body: formData
                })
                    .then(response => {
                        // Check if the response is OK
                        if (!response.ok) {
                            throw new Error('Network response was not ok');
                        }
                        // Check if the response is in JSON format
                        const contentType = response.headers.get("content-type");
                        if (contentType && contentType.includes("application/json")) {
                            return response.json();
                        } else {
                            throw new TypeError("Expected JSON response");
                        }
                    })
                    .then(data => {
                        if (data.success) {
                            toastr.success('Import successful!');
                            $('#importModal').modal('hide');
                            location.reload(); // Reload the page to reflect changes
                        } else {
                            toastr.error('Import failed: ' + (data.message || 'An error occurred.'));
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        toastr.error('Import failed: ' + error.message);
                    });
            });


            /*
            document.getElementById("exportToExcelButton").addEventListener("click", function () {
                // Replace the URL with your actual API endpoint URL
                window.location.href = '/api/export/to-excel';
            });
            */

            /*
            document.getElementById("exportToExcelButton").addEventListener("click", function () {
                var searchTerm = document.getElementById("externalSearch").value;
                window.location.href = `/api/export/to-excel?searchTerm=${encodeURIComponent(searchTerm)}`;
            });
            */

           /*
            document.getElementById("exportToExcelButton").addEventListener("click", function () {
                var searchTerm = document.getElementById("externalSearch").value.toLowerCase();
                var matchingRow = null;

                // Iterate over each row to find the matching customer based on both Nombre and NombreComercial
                document.querySelectorAll(".tblData").forEach(function (row) {
                    var nombre = row.getAttribute("data-nombre").toLowerCase();
                    var nombreComercial = row.getAttribute("data-nombrecomercial").toLowerCase();

                    // Check if Nombre matches the search term
                    if (nombre.includes(searchTerm)) {
                        // If there are multiple matches, check NombreComercial
                        if (matchingRow === null || nombreComercial.includes(searchTerm)) {
                            matchingRow = row; // Assign the matching row if it matches NombreComercial
                        }
                    }
                });

                if (matchingRow) {
                    var customerId = matchingRow.getAttribute("data-id");
                    var nombre = matchingRow.getAttribute("data-nombre");
                    var nombreComercial = matchingRow.getAttribute("data-nombrecomercial");

                    /*
                    alert("Search Term: " + searchTerm);
                    alert("Customer ID: " + customerId);
                    alert("Nombre: " + nombre);
                    alert("Nombre Comercial: " + nombreComercial);
                    

                    window.location.href = `/api/export/to-excel?customerId=${encodeURIComponent(customerId)}`;
                } else {
                    alert("No matching customer found.");
                }
            });
            */

            function applySearchTerm() {
                var searchTerm = sessionStorage.getItem('searchTerm') || '';
                console.log("applySearchTerm: searchTerm =", searchTerm);
                $('#externalSearch').val(searchTerm);  // Set the search input value

                var tablesMatched = false;

                $('.tab-pane').each(function () {
                    var $tabPane = $(this);
                    var $tables = $tabPane.find('.tblData');

                    // Hide all tables and tab panes initially, excluding the creation form modal
                    $tables.closest('table').addClass('hidden');
                    if (!$tabPane.is('#newCustomerModal')) {
                        $tabPane.addClass('hidden');
                    }

                    $tables.each(function () {
                        var nombre = $(this).data('nombre').toLowerCase();
                        var nombreComercial = $(this).data('nombrecomercial').toLowerCase();
                        var id = $(this).data('id').toLowerCase();
                        var parentTable = $(this).closest('table');
                        var parentTabPane = parentTable.closest('.tab-pane');
                        var tableUserId = $(this).data('id');

                        if (nombre.includes(searchTerm) || nombreComercial.includes(searchTerm) || id.includes(searchTerm)) {
                            parentTable.removeClass('hidden');
                            parentTabPane.removeClass('hidden');
                            tablesMatched = true;

                            $('.edit-button, .delete-button').hide();
                            $('.edit-button, .delete-button').each(function () {
                                if ($(this).data('id') == tableUserId) {
                                    $(this).show();
                                }
                            });

                            return false; // Exit the loop early if a match is found
                        }
                    });

                    if (tablesMatched) {
                        $tables.filter(':visible').each(function () {
                            if (!$.fn.dataTable.isDataTable($(this))) {
                                $(this).DataTable({
                                    paging: true,
                                    searching: true,
                                    ordering: false,
                                    info: false,
                                    lengthMenu: [[4, -1], ["Summary", "All"]],
                                    pageLength: -1,
                                    columnDefs: [
                                        { orderable: true, targets: 1 }
                                    ],
                                    order: [[1, 'asc']],
                                    autoWidth: false,
                                    language: {
                                        search: "Search in this record:"
                                    }
                                });
                            }
                        });
                    }
                });

                if (!tablesMatched) {
                    //$('.tab-pane').removeClass('hidden');
                    //$('.nav-tabs a:first').tab('show'); // Show the first tab if no match is found4
                    $('.tab-pane').addClass('hidden');
                    $('.nav-tabs').addClass('hidden');
                    $('#exportToExcelButton').addClass('hidden');
                    $('.edit-button, .delete-button').addClass('hidden');
                    $('#dashboardTabs').addClass('hidden-content');

                }

                if (searchTerm === "") {
                    // Hide the tab panes and nav-tabs if the search term is empty, excluding the creation form modal
                    $('.tab-pane').addClass('hidden');
                    $('.nav-tabs').addClass('hidden');
                    $('#exportToExcelButton').addClass('hidden');

                    if (isNuevoClienteClicked) {
                        console.log("Inside if clicked condition");
                        $('#newCustomerModal').modal('show'); // Show the modal if Nuevo Cliente button was clicked
                        $('.nav-tabs').removeClass('hidden');
                    }
                } else {
                    $('.nav-tabs').removeClass('hidden');
                    $('#newCustomerModal').addClass('show');
                    if ($('#newCustomerModal').hasClass('show')) {
                        $('.tab-pane').removeClass('hidden');
                    }
                }
            }

            $('#externalSearch').on('keydown', function (e) {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    var searchTerm = $(this).val().toLowerCase();
                    console.log("externalSearch: searchTerm =", searchTerm);
                    sessionStorage.setItem('searchTerm', searchTerm);
                    applySearchTerm();
                    sessionStorage.setItem('pageReloaded', 'false'); // Reset pageReloaded flag
                    location.reload();  // Reload the page to update the table with the new data
                }
            });

            var activeTab = sessionStorage.getItem('activeTab');
            if (activeTab) {
                console.log("Setting active tab from sessionStorage: activeTab =", activeTab);
                $('#dashboardTabs a[href="' + activeTab + '"]').tab('show');
            }

            $('#dashboardTabs a').on('click', function (e) {
                e.preventDefault();
                var tabId = $(this).attr('href');
                console.log("Tab clicked: tabId =", tabId);
                sessionStorage.setItem('activeTab', tabId);
                sessionStorage.setItem('pageReloaded', 'false'); // Reset pageReloaded flag
                location.reload();  // Reload the page to update the table with the new data
            });

            if (sessionStorage.getItem('pageReloaded') === 'false') {
                sessionStorage.setItem('pageReloaded', 'true');
            }

            applySearchTerm();

            // Reinitialize DataTables when a tab is shown
            $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                var target = $(e.target).attr("href");
                var searchTerm = $('#externalSearch').val().toLowerCase();
                var foundMatch = false;

                $(target).find('.tblData').each(function () {
                    if (foundMatch) return;

                    var nombre = $(this).data('nombre').toLowerCase();
                    var nombreComercial = $(this).data('nombrecomercial').toLowerCase();

                    if (nombre.includes(searchTerm) || nombreComercial.includes(searchTerm)) {
                        if (!$.fn.dataTable.isDataTable($(this))) {
                            $(this).DataTable({
                                paging: true,
                                searching: true,
                                ordering: false,
                                info: false,
                                lengthMenu: [[4, -1], ["Summary", "All"]],
                                pageLength: -1,
                                columnDefs: [
                                    { orderable: true, targets: 1 }
                                ],
                                order: [[1, 'asc']],
                                autoWidth: false,
                                language: {
                                    search: "Search in this record:"
                                }
                            });
                        }
                        foundMatch = true; // Stop after the first match is found and initialized
                    }
                });
            });

            // Ensure the "Nuevo Cliente" button shows the modal unconditionally
            $('.newClient').on('click', function () {
                isNuevoClienteClicked = true;
                $('.tab-pane').removeClass('hidden');
                $('.nav-tabs').removeClass('hidden');

                console.log("Nuevo Cliente button clicked"); // Log when the button is clicked
                var newCustomerModal = bootstrap.Modal.getOrCreateInstance(document.getElementById('newCustomerModal'));
                newCustomerModal.show();

                $('#dashboardTabsContent').addClass('hidden-content');
                $('#dashboardTabs').addClass('hidden-content');
            });

            // Hide tabs when the modal is closed
            $('#newCustomerModal').on('hide.bs.modal', function () {
                $('.tab-pane').addClass('hidden');
                $('.nav-tabs').addClass('hidden');

                $('#dashboardTabsContent').removeClass('hidden-content');
                $('#dashboardTabs').removeClass('hidden-content');

            });

            // Handle form submission for Demografico form
            $('#editDemograficoForm').on('submit', function (e) {
                e.preventDefault(); // Prevent default form submission
                const form = $(this);
                const formData = form.serialize(); // Serialize form data

                $.ajax({
                    url: '@Url.Action("UpdateDemografico", "Dashboard")', // Update this URL if necessary
                    type: 'POST',
                    data: formData,
                    success: function (response) {
                        if (response.success) {
                            toastr.success('Demographic details updated successfully!');
                            $('#editDemograficoOffcanvas').offcanvas('hide');
                            location.reload(); // Reload the page to see the changes
                        } else {
                            toastr.error(response.message || 'Failed to update demographic details.');
                        }
                    },
                    error: function () {
                        toastr.error('Failed to update demographic details.');
                    }
                });
            });
            // Handle form submission for Contributivo form
            $('#editContributivoForm').on('submit', function (e) {
                e.preventDefault();
                const form = $(this);
                const formData = form.serialize();

                $.ajax({
                    url: '@Url.Action("UpdateContributivo", "Dashboard")', // Update this URL if necessary
                    type: 'POST',
                    data: formData,
                    success: function (response) {
                        if (response.success) {
                            toastr.success('Tax Matter details updated successfully!');
                            $('#editContributivoOffcanvas').offcanvas('hide');
                            location.reload();
                        } else {
                            toastr.error(response.message || 'Failed to update tax matter details.');
                        }
                    },
                    error: function () {
                        toastr.error('Failed to update tax matter details.');
                    }
                });
            });

            // Handle form submission for Administrativo form
            $('#editAdministrativoForm').on('submit', function (e) {
                e.preventDefault();
                const form = $(this);
                const formData = form.serialize();

                $.ajax({
                    url: '@Url.Action("UpdateAdministrativo", "Dashboard")', // Update this URL if necessary
                    type: 'POST',
                    data: formData,
                    success: function (response) {
                        if (response.success) {
                            toastr.success('Administrative details updated successfully!');
                            $('#editAdministrativoOffcanvas').offcanvas('hide');
                            location.reload();
                        } else {
                            toastr.error(response.message || 'Failed to update administrative details.');
                        }
                    },
                    error: function () {
                        toastr.error('Failed to update administrative details.');
                    }
                });
            });

            // Handle form submission for Identificacion form
            $('#editIdentificacionForm').on('submit', function (e) {
                e.preventDefault();
                const form = $(this);
                const formData = form.serialize();

                $.ajax({
                    url: '@Url.Action("UpdateIdentificacion", "Dashboard")', // Update this URL if necessary
                    type: 'POST',
                    data: formData,
                    success: function (response) {
                        if (response.success) {
                            toastr.success('Identification details updated successfully!');
                            $('#editIdentificacionOffcanvas').offcanvas('hide');
                            location.reload();
                        } else {
                            toastr.error(response.message || 'Failed to update identification details.');
                        }
                    },
                    error: function () {
                        toastr.error('Failed to update identification details.');
                    }
                });
            });

            // Handle form submission for Pago form
            $('#editPagoForm').on('submit', function (e) {
                e.preventDefault();
                const form = $(this);
                const formData = form.serialize();

                $.ajax({
                    url: '@Url.Action("UpdatePago", "Dashboard")', // Update this URL if necessary
                    type: 'POST',
                    data: formData,
                    success: function (response) {
                        if (response.success) {
                            toastr.success('Payment Method details updated successfully!');
                            $('#editPagoOffcanvas').offcanvas('hide');
                            location.reload();
                        } else {
                            toastr.error(response.message || 'Failed to update payment method details.');
                        }
                    },
                    error: function () {
                        toastr.error('Failed to update payment method details.');
                    }
                });
            });

            // Handle form submission for Confidencial form
            $('#editConfidencialForm').on('submit', function (e) {
                e.preventDefault();
                const form = $(this);
                const formData = form.serialize();

                $.ajax({
                    url: '@Url.Action("UpdateConfidencial", "Dashboard")', // Update this URL if necessary
                    type: 'POST',
                    data: formData,
                    success: function (response) {
                        if (response.success) {
                            toastr.success('Confidential details updated successfully!');
                            $('#editConfidencialOffcanvas').offcanvas('hide');
                            location.reload();
                        } else {
                            toastr.error(response.message || 'Failed to update confidential details.');
                        }
                    },
                    error: function () {
                        toastr.error('Failed to update confidential details.');
                    }
                });
            });
        });

        $('#submitAllFormsButton').on('click', function () {
            submitAllForms();
        });


        function editDemografico(id) {
            $.ajax({
                url: '@Url.Action("GetDemograficoById", "Dashboard")',
                type: 'GET',
                data: { id: id },
                success: function (data) {
                    $('#demograficoId').val(data.id);
                    $('#demograficoNombre').val(data.nombre);
                    $('#demograficoNombreComercial').val(data.nombreComercial);
                    $('#demograficoTelefono').val(data.telefono);
                    $('#demograficoCelular').val(data.celular);
                    $('#demograficoDir').val(data.dir);
                    $('#demograficoTipo').val(data.tipo);
                    $('#demograficoTipo option[value="' + data.tipo + '"]').attr('selected', 'selected');
                    $('#demograficoPatronal').val(data.patronal);
                    $('#demograficoSSN').val(data.ssn);
                    $('#demograficoIncorporacion').val(data.incorporacion);
                    $('#demograficoOperaciones').val(data.operaciones);
                    $('#demograficoIndustria').val(data.industria);
                    $('#demograficoNAICS').val(data.naics);
                    $('#demograficoDescripcion').val(data.descripcion);
                    $('#demograficoContacto').val(data.contacto);
                    $('#demograficoDirFisica').val(data.dirFisica);
                    $('#demograficoDirPostal').val(data.dirPostal);
                    $('#demograficoEmail').val(data.email);
                    $('#demograficoEmail2').val(data.email2);

                    var offcanvasElement = document.getElementById('editDemograficoOffcanvas');
                    var offcanvas = new bootstrap.Offcanvas(offcanvasElement);
                    offcanvas.show();
                },
                error: function () {
                    toastr.error('Failed to fetch demografico details.');
                }
            });
        }


        function editContributivo(id) {
            //console.log("Edit button clicked for Contributivo ID:", id);
            $.ajax({
                url: '@Url.Action("GetContributivoById", "Dashboard")',
                type: 'GET',
                data: { id: id },
                success: function (data) {
                    //console.log("Data fetched:", data);
                    $('#contributivoId').val(data.id);
                    $('#contributivoNombre').val(data.nombre);
                    $('#contributivoNombreComercial').val(data.nombreComercial);
                    $('#contributivoEstatal').val(data.estatal);
                    $('#contributivoPoliza').val(data.poliza);
                    $('#contributivoRegComerciante').val(data.regComerciante);
                    $('#contributivoVencimiento').val(data.vencimiento);
                    $('#contributivoChoferil').val(data.choferil);
                    $('#contributivoDeptEstado').val(data.deptEstado);

                    var offcanvasElement = document.getElementById('editContributivoOffcanvas');
                    var offcanvas = new bootstrap.Offcanvas(offcanvasElement);
                    offcanvas.show();
                },
                error: function () {
                    toastr.error('Failed to fetch contributivo details.');
                }
            });
        }

        function editAdministrativo(id) {
            //console.log("Edit button clicked for Administrativo ID:", id);
            $.ajax({
                url: '@Url.Action("GetAdministrativoById", "Dashboard")',
                type: 'GET',
                data: { id: id },
                success: function (data) {
                    //console.log("Data fetched:", data);
                    $('#administrativoId').val(data.id);
                    $('#administrativoNombre').val(data.nombre);
                    $('#administrativoNombreComercial').val(data.nombreComercial);
                    $('#administrativoContrato').val(data.contrato);
                    $('#administrativoFacturacion').val(data.facturacion);
                    $('#administrativoFacturacionBase').val(data.facturacionBase);
                    $('#administrativoIVU').val(data.ivu);
                    $('#administrativoStaff').val(data.staff);
                    $('#administrativoStaffDate').val(data.staffDate);

                    var offcanvasElement = document.getElementById('editAdministrativoOffcanvas');
                    var offcanvas = new bootstrap.Offcanvas(offcanvasElement);
                    offcanvas.show();
                },
                error: function () {
                    toastr.error('Failed to fetch administrativo details.');
                }
            });
        }

        function editIdentificacion(id) {
            //console.log("Edit button clicked for Identificacion ID:", id);
            $.ajax({
                url: '@Url.Action("GetIdentificacionById", "Dashboard")',
                type: 'GET',
                data: { id: id },
                success: function (data) {
                    //console.log("Data fetched:", data);
                    $('#identificacionId').val(data.id);
                    $('#identificacionNombre').val(data.nombre);
                    $('#identificacionNombreComercial').val(data.nombreComercial);
                    $('#identificacionAccionista').val(data.accionista);
                    $('#identificacionSSNA').val(data.ssna);
                    $('#identificacionCargo').val(data.cargo);
                    $('#identificacionLicConducir').val(data.licConducir);
                    $('#identificacionNacimiento').val(data.nacimiento);

                    var offcanvasElement = document.getElementById('editIdentificacionOffcanvas');
                    var offcanvas = new bootstrap.Offcanvas(offcanvasElement);
                    offcanvas.show();
                },
                error: function () {
                    toastr.error('Failed to fetch identificacion details.');
                }
            });
        }

        function editPago(id) {
            //console.log("Edit button clicked for Pago ID:", id);
            $.ajax({
                url: '@Url.Action("GetPagoById", "Dashboard")',
                type: 'GET',
                data: { id: id },
                success: function (data) {
                    //console.log("Data fetched:", data);
                    $('#pagoId').val(data.id);
                    $('#pagoNombre').val(data.nombre);
                    $('#pagoNombreComercial').val(data.nombreComercial);
                    $('#pagoBankClient').val(data.bankClient);
                    $('#pagoBanco').val(data.banco);
                    $('#pagoNumRuta').val(data.numRuta);
                    $('#pagoNameBank').val(data.nameBank);
                    $('#pagoTipoCuenta').val(data.tipoCuenta);
                    $('#pagoBankClientS').val(data.bankClientS);
                    $('#pagoBancoS').val(data.bancoS);
                    $('#pagoNumRutaS').val(data.numRutaS);
                    $('#pagoNameBankS').val(data.nameBankS);
                    $('#pagoTipoCuentaS').val(data.tipoCuentaS);
                    $('#pagoNameCard').val(data.nameCard);
                    $('#pagoTarjeta').val(data.tarjeta);
                    $('#pagoTipoTarjeta').val(data.tipoTarjeta);
                    $('#pagoCVV').val(data.cvv);
                    $('#pagoExpiracion').val(data.expiracion);
                    $('#pagoPostalBank').val(data.postalBank);
                    $('#pagoNameCardS').val(data.nameCardS);
                    $('#pagoTarjetaS').val(data.tarjetaS);
                    $('#pagoTipoTarjetaS').val(data.tipoTarjetaS);
                    $('#pagoCVVS').val(data.cvvs);
                    $('#pagoExpiracionS').val(data.expiracionS);
                    $('#pagoPostalBankS').val(data.postalBankS);

                    var offcanvasElement = document.getElementById('editPagoOffcanvas');
                    var offcanvas = new bootstrap.Offcanvas(offcanvasElement);
                    offcanvas.show();
                },
                error: function () {
                    toastr.error('Failed to fetch pago details.');
                }
            });
        }

        function editConfidencial(id) {
            //console.log("Edit button clicked for Confidencial ID:", id);
            $.ajax({
                url: '@Url.Action("GetConfidencialById", "Dashboard")',
                type: 'GET',
                data: { id: id },
                success: function (data) {
                    //console.log("Data fetched:", data);
                    $('#confidencialId').val(data.id);
                    $('#confidencialNombre').val(data.nombre);
                    $('#confidencialNombreComercial').val(data.nombreComercial);
                    $('#confidencialUserSuri').val(data.userSuri);
                    $('#confidencialPassSuri').val(data.passSuri);
                    $('#confidencialUserEftps').val(data.userEftps);
                    $('#confidencialPassEftps').val(data.passEftps);
                    $('#confidencialPIN').val(data.pin);
                    $('#confidencialUserCFSE').val(data.userCFSE);
                    $('#confidencialPassCFSE').val(data.passCFSE);
                    $('#confidencialUserDept').val(data.userDept);
                    $('#confidencialPassDept').val(data.passDept);
                    $('#confidencialUserCofim').val(data.userCofim);
                    $('#confidencialPassCofim').val(data.passCofim);
                    $('#confidencialUserMunicipio').val(data.userMunicipio);
                    $('#confidencialPassMunicipio').val(data.passMunicipio);

                    var offcanvasElement = document.getElementById('editConfidencialOffcanvas');
                    var offcanvas = new bootstrap.Offcanvas(offcanvasElement);
                    offcanvas.show();
                },
                error: function () {
                    toastr.error('Failed to fetch confidencial details.');
                }
            });
        }


        function deleteCustomer(id) {
            if (confirm("Are you sure you want to delete this customer?")) {
                $.ajax({
                    url: '/Dashboard/DeleteCustomer',
                    type: 'POST',
                    data: { id: id },
                    success: function (response) {
                        if (response.success) {
                            toastr.success(response.message);
                            location.reload();  // Reload the page to update the table with the deleted data
                        } else {
                            toastr.error(response.message || 'Failed to delete customer.');
                        }
                    },
                    error: function () {
                        toastr.error('Failed to delete customer.');
                    }
                });
            }
        }
    </script>


    <!-- Include necessary libraries -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
}